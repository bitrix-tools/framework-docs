---
title: Консольные команды
description: 'Консольные команды. Документация по Bitrix Framework: принципы работы, архитектура и примеры использования.'
---

Консольные команды в Bitrix Framework -- это инструменты для выполнения операционных задач через терминал. Они работают как PHP-скрипты и умеют:

-  принимать аргументы и опции,

-  выполнять долгие операции без ограничений веб-сервера,

-  автоматизировать процессы разработки и администрирования,

-  запускаться по расписанию через cron.

С их помощью можно:

-  управлять кешем и индексами,

-  генерировать код компонентов, контроллеров, ORM-классов,

-  выполнять миграции базы данных,

-  обмениваться данными с внешними системами.

## Запустить команду

Консольные команды в Bitrix Framework запускаются через файл `bitrix.php` в папке `/bitrix/` вашего проекта.

```bash
cd /path/to/document_root/bitrix
php bitrix.php [команда] [аргументы] [опции]
```

Для работы с консольными командами необходимо настроить Composer.

{% note tip "Подробнее в статье" %}

[Composer](https://docs.1c-bitrix.ru/pages/get-started/composer.html)

{% endnote %}

### Как просмотреть список команд

Чтобы увидеть список доступных в системе команд, выполните:

```bash
php bitrix.php list
```

В списке отобразятся встроенные команды Bitrix Framework и команды из установленных модулей.

### Встроенные команды

Bitrix Framework включает готовые команды для разработки.

Примеры команд:

-  `orm:annotate` -- сканирует ORM-сущности и генерирует аннотации для их полей. Это помогает IDE понимать структуру данных и улучшает автодополнение.

-  `make:component` -- создает компонент с базовой структурой.

-  `make:controller` -- генерирует REST-контроллер для API.

-  `make:tablet` -- создает ORM-класс (DataManager) для таблицы базы данных.

### Как получить справку по команде

Чтобы получить подробную информацию о конкретной команде, используйте:

```bash
php bitrix.php help [имя-команды]
# или альтернативный вариант
php bitrix.php [имя-команды] --help
```

Справка покажет описание команды, список аргументов и опций.

## Создать новую команду

Консольная команда в Bitrix Framework -- это PHP-класс, который наследуется от `Symfony\Component\Console\Command\Command`.

{% note tip "" %}

Подробную информацию о создании команд, их структуре и возможностях смотрите в [официальной документации Symfony](https://symfony.com/doc/current/console.html#creating-a-command).

{% endnote %}

### Как зарегистрировать команду

После создания класса зарегистрируйте команду в файле `.settings.php` в корне вашего модуля. Если файла нет, создайте его. Если файл уже существует, дополните его:

```php

return [
    'console' => [
        'value' => [
            'commands' => [
                // Регистрация команды
                \Partner\Module\Cli\Command\Feature\RebuildCommand::class,
            ],
        ],
        'readonly' => true,
    ],
];
```

После добавления команда появится в выводе `php bitrix.php list`.

### Где разместить файлы команд

Файлы команд рекомендуется хранить в каталоге модуля в папке `/lib/command/`.

Пример структуры модуля с одним классом команды:

```
/local/modules/partner.module/
├── .settings.php          # Регистрация команд
├── install/
│   └── index.php
└── lib/
    └── Cli/
        └── Command/
            └── Feature/
                └── RebuildCommand.php
```

Имя команды формируется на основе пространства имен. Для примера выше имя будет `feature:rebuild`.

## **Настроить запуск по расписанию**

Команды можно запускать по расписанию через cron для регулярных задач.

Пример настройки cron:

```bash
# Выполнять команду каждый день в 3:00
0 3 * * * php /path/to/document_root/bitrix/bitrix.php [command] --no-interaction

# Выполнять команду каждое воскресенье в 4:00
0 4 * * 0 php /path/to/document_root/bitrix/bitrix.php [command] --no-interaction
```

Опция `--no-interaction` отключает интерактивные запросы.
